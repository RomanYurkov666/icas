

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Authentication &mdash; Admarkt Sellside API 0.41 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
    <link rel="top" title="Admarkt Sellside API 0.41 documentation" href="index.html"/>
        <link rel="next" title="Advertisements" href="ads.html"/>
        <link rel="prev" title="Overview" href="overview.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="fa fa-home"> Admarkt Sellside API</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="overview.html#media-types">Media Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview.html#content-type-and-accept-headers">Content-Type and Accept Headers</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview.html#authentication">Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview.html#customize-response-body">Customize response body</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview.html#dates-and-times">Dates and Times</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview.html#prices-and-currencies">Prices and Currencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview.html#http-response-codes-and-error-handling">HTTP Response Codes and Error Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="overview.html#dry-run-request-validation">Dry-Run Request Validation</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Authentication</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#what-is-oauth-2-0">What is OAuth 2.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="#oauth-2-0-roles">OAuth 2.0 Roles</a></li>
<li class="toctree-l2"><a class="reference internal" href="#oauth-2-0-endpoints">OAuth 2.0 Endpoints</a></li>
<li class="toctree-l2"><a class="reference internal" href="#obtaining-an-access-token">Obtaining an Access Token</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-an-access-token">Using an Access Token</a></li>
<li class="toctree-l2"><a class="reference internal" href="#refreshing-an-access-token">Refreshing an Access Token</a></li>
<li class="toctree-l2"><a class="reference internal" href="#expiration-times">Expiration Times</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ads.html">Advertisements</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ads.html#fields">Fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="ads.html#images">Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="ads.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="categories.html">Categories</a><ul>
<li class="toctree-l2"><a class="reference internal" href="categories.html#fields">Fields</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="attributes.html">Attributes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="attributes.html#category-attributes">Category Attributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="attributes.html#user-defined-attributes">User-Defined Attributes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="error-handling.html">Error Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-reference.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="reference/get-ad.html">GET /ad</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/get-ad-id.html">GET /ad/{id}</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/post-ad.html">POST /ad</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/put-ad-id.html">PUT /ad/{id}</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/put-ad-id-status.html">PUT /ad/{id}/status</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/get-category.html">GET /category</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/get-category-id.html">GET /category/{id}</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/get-category-id-attributes.html">GET /category/{id}/attributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/get-report.html">GET /report</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/post-image.html">POST /image</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/get-image.html">GET /image/{id}</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/ad-status.html">Ad Status</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/price-types.html">Price Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference/error-codes.html">Error Codes</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Admarkt Sellside API</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Authentication</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/authentication.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="authentication">
<span id="index-0"></span><span id="id1"></span><h1>Authentication<a class="headerlink" href="#authentication" title="Permalink to this headline">¶</a></h1>
<p>Authentication is provided using <em>OAuth2</em> to allow easy integration with
existing libraries. For more information please refer to the <a class="reference external" href="http://oauth.net/2/">OAuth 2.0
website</a>. The latest version of the OAuth 2.0
specification can be found <a class="reference external" href="http://tools.ietf.org/html/draft-ietf-oauth-v2-31">here</a>.</p>
<div class="section" id="what-is-oauth-2-0">
<h2>What is OAuth 2.0<a class="headerlink" href="#what-is-oauth-2-0" title="Permalink to this headline">¶</a></h2>
<p>OAuth 2.0 is an open authorization protocol which enables applications to
access each others data. OAuth 2.0 specification replaces and obsoletes the
OAuth 1.0 protocol and is <em>not</em> backward compatible with OAuth 1.0.</p>
</div>
<div class="section" id="oauth-2-0-roles">
<span id="oauth2-roles"></span><h2>OAuth 2.0 Roles<a class="headerlink" href="#oauth-2-0-roles" title="Permalink to this headline">¶</a></h2>
<p>OAuth 2.0 defines the following roles of users and applications:</p>
<ul class="simple">
<li><strong>Resource Owner:</strong> This is the person or application that owns the data
that is to be shared. In this context <em>resource owner</em>
is the Admarkt user.</li>
<li><strong>Resource Server:</strong> This is the server hosting the resource owned by the
resource owner. In this context <em>resource server</em> is the server hosting
Admarkt Sellside API.</li>
<li><strong>Client:</strong> This is the application requesting access to the resources stored
on the resource server. In this context <em>client</em> is the application wanting
to use the Admarkt Sellside API.</li>
<li><strong>Authorization Server:</strong> The authorization server is the server
authorizing the client app to access the resources of the resource owner.
In this context <em>authorization server</em> is the server hosting authentication
and token endpoints.</li>
</ul>
</div>
<div class="section" id="oauth-2-0-endpoints">
<span id="oauth2-endpoints"></span><h2>OAuth 2.0 Endpoints<a class="headerlink" href="#oauth-2-0-endpoints" title="Permalink to this headline">¶</a></h2>
<p><strong>Authorization Endpoint:</strong> This is the endpoint on the authorization server
where the resource owner logs in, and grants authorization to the client
application. The authorization endpoint urls are as follows:</p>
<ul class="simple">
<li><em>Sandbox:</em> <a class="reference external" href="https://auth.demo.qa-mp.so/accounts/oauth/authorize">https://auth.demo.qa-mp.so/accounts/oauth/authorize</a></li>
<li><em>Production:</em> <a class="reference external" href="https://auth.marktplaats.nl/accounts/oauth/authorize">https://auth.marktplaats.nl/accounts/oauth/authorize</a></li>
</ul>
<p><strong>Token Endpoint:</strong>  This is the endpoint on the authorization server
where the client application exchanges the authorization code,
client ID and client secret, for an access token.
The token endpoint urls are as follows:</p>
<ul class="simple">
<li><em>Sandbox:</em> <a class="reference external" href="https://auth.demo.qa-mp.so/accounts/oauth/token">https://auth.demo.qa-mp.so/accounts/oauth/token</a></li>
<li><em>Production:</em> <a class="reference external" href="https://auth.marktplaats.nl/accounts/oauth/token">https://auth.marktplaats.nl/accounts/oauth/token</a></li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The Sandbox environment uses a self-signed certificate for the
SSL encryption. You need to disable certificate verification in
your client library.</p>
</div>
</div>
<div class="section" id="obtaining-an-access-token">
<span id="id2"></span><h2>Obtaining an Access Token<a class="headerlink" href="#obtaining-an-access-token" title="Permalink to this headline">¶</a></h2>
<p>The steps for obtaining an access token are as follows:</p>
<div class="section" id="step-1-redirect-to-the-authorization-url">
<h3>Step 1: Redirect to the authorization url<a class="headerlink" href="#step-1-redirect-to-the-authorization-url" title="Permalink to this headline">¶</a></h3>
<p>Redirect the resource owner (user) to the authorization url with the following GET parameters</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="30%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Required</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>response_type</td>
<td>Required</td>
<td>Must be set to <tt class="docutils literal"><span class="pre">code</span></tt></td>
</tr>
<tr class="row-odd"><td>client_id</td>
<td>Required</td>
<td>Your client id</td>
</tr>
<tr class="row-even"><td>scope</td>
<td>Required</td>
<td>The requested scope. Should be set to <tt class="docutils literal"><span class="pre">read</span> <span class="pre">write</span></tt></td>
</tr>
<tr class="row-odd"><td>redirect_uri</td>
<td>Optional</td>
<td>The URL to which the authorization server redirects the user with an authorization
code after successful authorization. If not provided, the redirect URL specified
with the client registration is used.</td>
</tr>
<tr class="row-even"><td>state</td>
<td>Optional, but recommended</td>
<td>Any client state that needs to be passed on to the client request URI</td>
</tr>
</tbody>
</table>
<div class="highlight-http"><div class="highlight"><pre>GET /accounts/oauth/authorize?response_type=code&amp;client_id=YOUR_CLIENT_ID&amp;scope=read+write&amp;redirect_uri=https://yoursite.com/code&amp;state=YOUR_STATE
Host: auth.demo.qa-mp.so
</pre></div>
</div>
</div>
<div class="section" id="step-2-redirect-to-the-redirect-uri">
<h3>Step 2: Redirect to the redirect_uri<a class="headerlink" href="#step-2-redirect-to-the-redirect-uri" title="Permalink to this headline">¶</a></h3>
<p>After the resource owner logs in and confirms access request of the client
the authorization server redirects the resource owner to the <tt class="docutils literal"><span class="pre">redirect_uri</span></tt>
specified in the request at step 1 with the following GET parameters</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="30%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Required</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>code</td>
<td>Required</td>
<td>The authorization code</td>
</tr>
<tr class="row-odd"><td>state</td>
<td>Required, if present in step 1</td>
<td>The same value as sent by the client in the state parameter at step 1, if any</td>
</tr>
</tbody>
</table>
<div class="highlight-http"><div class="highlight"><pre>GET /code?code=AUTH_CODE&amp;state=YOUR_STATE
Host: yoursite.com
</pre></div>
</div>
</div>
<div class="section" id="step-3-post-to-the-token-endpoint">
<h3>Step 3: POST to the token endpoint<a class="headerlink" href="#step-3-post-to-the-token-endpoint" title="Permalink to this headline">¶</a></h3>
<p>After obtaining the authorization code at step 2 the client needs to make
a <em>POST</em> request to the <em>token endpoint</em> with the following parameters:</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="30%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Required</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>grant_type</td>
<td>Required</td>
<td>Must be set to <tt class="docutils literal"><span class="pre">authorization_code</span></tt></td>
</tr>
<tr class="row-odd"><td>code</td>
<td>Required</td>
<td>The authorization code received from the authorization server at step 2</td>
</tr>
<tr class="row-even"><td>client_id</td>
<td>Required</td>
<td>Your client id</td>
</tr>
<tr class="row-odd"><td>client_secret</td>
<td>Required</td>
<td>Your client secret</td>
</tr>
<tr class="row-even"><td>redirect_uri</td>
<td>Required, if present in step 1</td>
<td>If present, should be identical to the redirect_uri specified in step 1</td>
</tr>
</tbody>
</table>
<div class="highlight-http"><div class="highlight"><pre>POST /accounts/oauth/token
Host: auth.demo.qa-mp.so
Content-Type: application/www-form-urlencoded

grant_type=code&amp;code=AUTH_CODE&amp;client_id=YOUR_CLIENT_ID&amp;client_secret=YOUR_CLIENT_SECRET&amp;redirect_uri=https://yoursite.com/code
</pre></div>
</div>
</div>
<div class="section" id="step-4-receive-token-response">
<h3>Step 4: Receive token response<a class="headerlink" href="#step-4-receive-token-response" title="Permalink to this headline">¶</a></h3>
<p>The authentication server returns the following token response in JSON
format if the token request at step 3 is valid.</p>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="86%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>access_token</td>
<td>The access token as assigned by the authorization server</td>
</tr>
<tr class="row-odd"><td>token_type</td>
<td>The token type assigned by the authorization server. In this context set to <tt class="docutils literal"><span class="pre">bearer</span></tt>.</td>
</tr>
<tr class="row-even"><td>expires_in</td>
<td>Expiration time in seconds after which the access token becomes invalid</td>
</tr>
<tr class="row-odd"><td>refresh_token</td>
<td>The refresh token for obtaining a new access token</td>
</tr>
<tr class="row-even"><td>scope</td>
<td>The scope of the access token</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Every time you request a new access token you also receive a <strong>new refresh token</strong>.
This automatically invalidates the existing refresh token even if it has not
expired yet.</p>
</div>
<div class="highlight-http"><div class="highlight"><pre>POST /accounts/oauth/token
Host: auth.demo.qa-mp.so
Content-Type: application/www-form-urlencoded

grant_type=code&amp;code=AUTH_CODE&amp;client_id=YOUR_CLIENT_ID&amp;client_secret=YOUR_CLIENT_SECRET&amp;redirect_uri=https://yoursite.com/code

200 OK
Content-Type: application/json

{
    &quot;access_token&quot;  : &quot;1dc19b97-fd12-4feb-8c9d-042b4ba80747&quot;,
    &quot;token_type&quot;    : &quot;bearer&quot;,
    &quot;expires_in&quot;    : 300,
    &quot;refresh_token&quot; : &quot;7432aa20-97d1-4426-bab7-dbeed8b5d997&quot;,
    &quot;scope&quot;         : &quot;read write&quot;
}
</pre></div>
</div>
</div>
</div>
<div class="section" id="using-an-access-token">
<span id="id3"></span><h2>Using an Access Token<a class="headerlink" href="#using-an-access-token" title="Permalink to this headline">¶</a></h2>
<p>To use the access token for an actual API call you have to provide it in the <tt class="docutils literal"><span class="pre">Authorization</span></tt>
header as follows:</p>
<div class="highlight-http"><div class="highlight"><pre>GET /api/sellside/ad
Host: mp.lp.icas.ecg.so
Authorization: Bearer 1dc19b97-fd12-4feb-8c9d-042b4ba80747
</pre></div>
</div>
</div>
<div class="section" id="refreshing-an-access-token">
<span id="id4"></span><h2>Refreshing an Access Token<a class="headerlink" href="#refreshing-an-access-token" title="Permalink to this headline">¶</a></h2>
<p>The refresh token is used to obtain a new access token once the access token is no longer valid.
In order to obtain a new access token the following <em>POST</em> request to the <em>token endpoint</em>
with the following parameters is necessary.</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="30%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field</th>
<th class="head">Required</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>refresh_token</td>
<td>Required</td>
<td>Refresh token obtained when the original access token was received</td>
</tr>
<tr class="row-odd"><td>grant_type</td>
<td>Required</td>
<td>Must be set to <tt class="docutils literal"><span class="pre">refresh_token</span></tt></td>
</tr>
<tr class="row-even"><td>client_id</td>
<td>Required</td>
<td>Your client id</td>
</tr>
<tr class="row-odd"><td>client_secret</td>
<td>Required</td>
<td>Your client secret</td>
</tr>
</tbody>
</table>
<p>If the refresh token request is valid the authorization server returns a new access token. The token
response is identical to the token response explained at step 4 of <a class="reference internal" href="#obtaining-an-access-token"><em>Obtaining an Access Token</em></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Every time you request a new access token you also receive a <strong>new refresh token</strong>.
This automatically invalidates the existing refresh token even if it has not
expired yet.</p>
</div>
<div class="highlight-http"><div class="highlight"><pre>POST /accounts/oauth/token
Host: auth.demo.qa-mp.so
Content-Type: application/www-form-urlencoded

grant_type=refresh_token&amp;refresh_token=YOUR_CURRENT_REFRESH_TOKEN&amp;client_id=YOUR_CLIENT_ID&amp;client_secret=YOUR_CLIENT_SECRET

200 OK
Content-Type: application/json

{
    &quot;access_token&quot;  : &quot;52f1492d-8ad7-4d4c-88aa-2c38da2d45a2&quot;,
    &quot;token_type&quot;    : &quot;bearer&quot;,
    &quot;expires_in&quot;    : 300,
    &quot;refresh_token&quot; : &quot;fc668806-739d-4089-a9b0-f8ee10e53ded&quot;,
    &quot;scope&quot;         : &quot;read write&quot;
}
</pre></div>
</div>
</div>
<div class="section" id="expiration-times">
<h2>Expiration Times<a class="headerlink" href="#expiration-times" title="Permalink to this headline">¶</a></h2>
<p>Both access and refresh tokens expire after the time listed in the table below. After this period the token
is no longer valid.</p>
<p>Also note that every time you request a new access token you also receive a new refresh token and
your current refresh token is automatically invalidated even if it has not expired yet.</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="40%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Environment</th>
<th class="head">Access Token</th>
<th class="head">Refresh Token</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Sandbox</td>
<td>12 hours/43200 seconds</td>
<td>30 days/2592000 seconds</td>
</tr>
<tr class="row-odd"><td>Production</td>
<td>5 minutes/300 seconds</td>
<td>1 day/86400 seconds</td>
</tr>
</tbody>
</table>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ads.html" class="btn btn-neutral float-right" title="Advertisements"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="overview.html" class="btn btn-neutral" title="Overview"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2013-2014 The Admarkt Team.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.41',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/custom.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>